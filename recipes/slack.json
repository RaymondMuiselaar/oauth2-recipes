{"name":"slack","strategy":"oauth2","options":{"authorizationURL":"https://slack.com/oauth/authorize","tokenURL":"https://slack.com/api/oauth.access","scope":"identity.basic, identity.email, identity.avatar, identity.team","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  request.get({\n    url: 'https://slack.com/api/users.identity',\n    qs: {\n      token: accessToken\n    }\n  }, function(err, resp, body) {\n    if (err) return cb(err);\n    if (resp.statusCode !== 200) return cb(new Error(body));\n\n    var slackResponse = JSON.parse(body);\n    if (!slackResponse.ok) return cb(new Error(body));\n\n    var profile = slackResponse.user;\n    profile.slack_id = slackResponse.user.id;\n    profile.team = slackResponse.team;\n    cb(null, profile);\n  });\n\n}"}}}