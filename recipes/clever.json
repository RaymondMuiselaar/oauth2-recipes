{"name":"clever","strategy":"oauth2","options":{"authorizationURL":"https://clever.com/oauth/authorize","tokenURL":"https://clever.com/oauth/tokens","scope":"openid read:district_admins_basic read:school_admins_basic read:students_basic read:teachers_basic read:user_id","scripts":{"fetchUserProfile":"function(accessToken, ctx, cb) {\n  var authzHeader = 'Bearer ' + accessToken;\n  request.get('https://api.clever.com/me', {\n      headers: {\n\n        'Authorization': authzHeader\n      }\n    }\n\n    ,\n    function(err, r, body) {\n      if (err) {\n        return cb(err);\n      }\n      try {\n        var profile1 = JSON.parse(body);\n        var urlforProfile = 'https://api.clever.com' + profile1.links[1].uri;\n\n\n        var options = {\n          method: 'GET',\n          url: urlforProfile,\n          headers: {\n            authorization: authzHeader\n          }\n        };\n\n        request(options, function(error, response, body) {\n          if (error) cb(error);\n          var data = JSON.parse(body);\n          var profile = {};\n          profile.provider = 'Clever';\n          profile.id = data.data.id;\n          profile.name = data.data.name.first + \" \" + data.data.name.last;\n          profile.email = data.data.email;\n          profile.district = data.data.district;\n\n\n          cb(null, profile);\n        });\n\n\n      } catch (e) {\n        cb(e);\n      }\n    });\n\n\n}"}}}